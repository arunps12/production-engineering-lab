# Exercise 6.C — Multi-stage CI Pipeline
# Guide: docs/curriculum/06-cicd-automation.md
# Exercises: C1-C6

# TODO: Create a complete CI/CD pipeline with multiple stages

# name: Production CI/CD
# on:
#   push:
#     branches: [main]
#   pull_request:
#     branches: [main]
#
# jobs:
#   lint:
#     runs-on: ubuntu-latest
#     steps:
#       - uses: actions/checkout@v4
#       - uses: actions/setup-python@v5
#         with:
#           python-version: "3.11"
#       - name: Install and run linter
#         run: |
#           pip install ruff
#           ruff check .
#           ruff format --check .
#
#   test:
#     runs-on: ubuntu-latest
#     needs: lint
#     steps:
#       - uses: actions/checkout@v4
#       - uses: actions/setup-python@v5
#         with:
#           python-version: "3.11"
#       - name: Install dependencies
#         run: |
#           pip install uv
#           uv sync
#       - name: Run tests with coverage
#         run: |
#           uv run pytest tests/ -v --cov=src --cov-report=xml
#       - name: Upload coverage
#         uses: codecov/codecov-action@v3
#
#   # Exercise 6.C.4 — Docker build in CI
#   build:
#     runs-on: ubuntu-latest
#     needs: test
#     steps:
#       - uses: actions/checkout@v4
#       - name: Build Docker image
#         run: docker build -t myapp:${{ github.sha }} .
#       - name: Test Docker image
#         run: |
#           docker run -d -p 8000:8000 --name testapp myapp:${{ github.sha }}
#           sleep 5
#           curl -f http://localhost:8000/health
#           docker stop testapp
#
#   # Exercise 6.C.5 — Deploy stage (conditional)
#   deploy:
#     runs-on: ubuntu-latest
#     needs: build
#     if: github.ref == 'refs/heads/main'
#     steps:
#       - name: Deploy
#         run: echo "Deploying to production..."
